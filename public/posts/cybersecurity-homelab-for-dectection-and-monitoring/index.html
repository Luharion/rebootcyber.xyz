<!DOCTYPE html>
<html lang="en" dir="auto">

<head><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="index, follow">
<title>Cybersecurity Homelab for Dectection and Monitoring | Liam Blog</title>
<meta name="keywords" content="Self-Hosted, hardware, tech, DNS, opendns, Pfsense, HACK">
<meta name="description" content="Cybersecurity homelab for dectection &amp; monitoring Building a cybersecurity homelab for detection &amp; monitoring This homelab will help you apply concepets used in real-world large-scale/enterprise infrastructe
What is a homelab A homelab is a place where you can safely do experiments without messing anything up
Content installing VMware Workstation as hypervisor Configuring Pfsense firewall for network segmentation &amp; security Configuring Security Onion as an all-in-one IDS, Security, and Log Management solution Configuring Kali Linux as an attack machine Configuring Windows Server 2019 as a DC Configuring Windows server Configuring Splunk Downloading &amp; installing vmware workstation pro VMware workstation pro">
<meta name="author" content="">
<link rel="canonical" href="https://rebootcyber.xyz/posts/cybersecurity-homelab-for-dectection-and-monitoring/">
<link crossorigin="anonymous" href="/assets/css/stylesheet.bc1149f4a72aa4858d3a9f71462f75e5884ffe8073ea9d6d5761d5663d651e20.css" integrity="sha256-vBFJ9KcqpIWNOp9xRi915YhP/oBz6p1tV2HVZj1lHiA=" rel="preload stylesheet" as="style">
<script defer crossorigin="anonymous" src="/assets/js/highlight.f413e19d0714851f6474e7ee9632408e58ac146fbdbe62747134bea2fa3415e0.js" integrity="sha256-9BPhnQcUhR9kdOfuljJAjlisFG&#43;9vmJ0cTS&#43;ovo0FeA="
    onload="hljs.initHighlightingOnLoad();"></script>
<link rel="icon" href="https://rebootcyber.xyz/favicon.ico">
<link rel="icon" type="image/png" sizes="16x16" href="https://rebootcyber.xyz/favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="https://rebootcyber.xyz/favicon-32x32.png">
<link rel="apple-touch-icon" href="https://rebootcyber.xyz/apple-touch-icon.png">
<link rel="mask-icon" href="https://rebootcyber.xyz/safari-pinned-tab.svg">
<meta name="theme-color" content="#2e2e33">
<meta name="msapplication-TileColor" content="#2e2e33">
<noscript>
    <style>
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
    <style>
        @media (prefers-color-scheme: dark) {
            :root {
                --theme: rgb(29, 30, 32);
                --entry: rgb(46, 46, 51);
                --primary: rgb(218, 218, 219);
                --secondary: rgb(155, 156, 157);
                --tertiary: rgb(65, 66, 68);
                --content: rgb(196, 196, 197);
                --hljs-bg: rgb(46, 46, 51);
                --code-bg: rgb(55, 56, 62);
                --border: rgb(51, 51, 51);
            }

            .list {
                background: var(--theme);
            }

            .list:not(.dark)::-webkit-scrollbar-track {
                background: 0 0;
            }

            .list:not(.dark)::-webkit-scrollbar-thumb {
                border-color: var(--theme);
            }
        }

    </style>
</noscript><meta property="og:title" content="Cybersecurity Homelab for Dectection and Monitoring" />
<meta property="og:description" content="Cybersecurity homelab for dectection &amp; monitoring Building a cybersecurity homelab for detection &amp; monitoring This homelab will help you apply concepets used in real-world large-scale/enterprise infrastructe
What is a homelab A homelab is a place where you can safely do experiments without messing anything up
Content installing VMware Workstation as hypervisor Configuring Pfsense firewall for network segmentation &amp; security Configuring Security Onion as an all-in-one IDS, Security, and Log Management solution Configuring Kali Linux as an attack machine Configuring Windows Server 2019 as a DC Configuring Windows server Configuring Splunk Downloading &amp; installing vmware workstation pro VMware workstation pro" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://rebootcyber.xyz/posts/cybersecurity-homelab-for-dectection-and-monitoring/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2022-10-07T14:21:08-05:00" />
<meta property="article:modified_time" content="2022-10-07T14:21:08-05:00" />

<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Cybersecurity Homelab for Dectection and Monitoring"/>
<meta name="twitter:description" content="Cybersecurity homelab for dectection &amp; monitoring Building a cybersecurity homelab for detection &amp; monitoring This homelab will help you apply concepets used in real-world large-scale/enterprise infrastructe
What is a homelab A homelab is a place where you can safely do experiments without messing anything up
Content installing VMware Workstation as hypervisor Configuring Pfsense firewall for network segmentation &amp; security Configuring Security Onion as an all-in-one IDS, Security, and Log Management solution Configuring Kali Linux as an attack machine Configuring Windows Server 2019 as a DC Configuring Windows server Configuring Splunk Downloading &amp; installing vmware workstation pro VMware workstation pro"/>


<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [, 
    {
      "@type": "ListItem",
      "position":  2 ,
      "name": "Posts",
      "item": "https://rebootcyber.xyz/posts/"
    }, 
    {
      "@type": "ListItem",
      "position":  3 ,
      "name": "Cybersecurity Homelab for Dectection and Monitoring",
      "item": "https://rebootcyber.xyz/posts/cybersecurity-homelab-for-dectection-and-monitoring/"
    }
  ]
}
</script>
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "Cybersecurity Homelab for Dectection and Monitoring",
  "name": "Cybersecurity Homelab for Dectection and Monitoring",
  "description": "Cybersecurity homelab for dectection \u0026amp; monitoring Building a cybersecurity homelab for detection \u0026amp; monitoring This homelab will help you apply concepets used in real-world large-scale/enterprise infrastructe\nWhat is a homelab A homelab is a place where you can safely do experiments without messing anything up\nContent installing VMware Workstation as hypervisor Configuring Pfsense firewall for network segmentation \u0026amp; security Configuring Security Onion as an all-in-one IDS, Security, and Log Management solution Configuring Kali Linux as an attack machine Configuring Windows Server 2019 as a DC Configuring Windows server Configuring Splunk Downloading \u0026amp; installing vmware workstation pro VMware workstation pro",
  "keywords": [
    "Self-Hosted", "hardware", "tech", "DNS", "opendns", "Pfsense", "HACK"
  ],
  "articleBody": "Cybersecurity homelab for dectection \u0026 monitoring Building a cybersecurity homelab for detection \u0026 monitoring This homelab will help you apply concepets used in real-world large-scale/enterprise infrastructe\nWhat is a homelab A homelab is a place where you can safely do experiments without messing anything up\nContent installing VMware Workstation as hypervisor Configuring Pfsense firewall for network segmentation \u0026 security Configuring Security Onion as an all-in-one IDS, Security, and Log Management solution Configuring Kali Linux as an attack machine Configuring Windows Server 2019 as a DC Configuring Windows server Configuring Splunk Downloading \u0026 installing vmware workstation pro VMware workstation pro\nConfiguring Pfsense Pfsense will be configured as a firewall to segment our private homelab network and will be only accessible from our Kali Linux VM\nClick “Create a new Virtual Machine” on VMware Workstation homescreen\nMake sure “Typical (recommenced)” is selected and click Next.\nClick browser and navigate to the folder where your Pfsense file is located.\nClick Next.\nRename your Virtual Machine. Preferably “pf-l1”\nClick next\n20GB disk size is sufficient for this VM\nEnsure that the “Split virtual disk into multiple files” option is selected\nClick next.\nClick “Customize Hardware”.\nIncrease the memory to 2GB\nAdd 5 network adapters and correspond them with VMnet interface as shown below. Then click finsh\nThe Pfsense machine will power on and start with this screen. Accept all the defaults.Pfsense will configure and reboot. Ones you are in the home screen of Pfsense we will get start setting up network adapters.\nEnter option 1\n**Should VLANS be set up now [y:n]?:**n\nEnter em0, em1, em2, em3, em4 \u0026 em5 respectively for each consecutive question\n**Do you want to proceed [y:n]?:**y\nEnter option 2 We’ll start with the LAN interface (2) The IP address 192.168.1.1 is going to be used to access the Pfsense WebGUI via the Kali Machine use the configuration below for the LAN interface.\nUse the configuration below for the OPT1 interface.\nUse the configuration below for the OPT2 interface\nLeave the OPT3 interface without an IP as it is going to have the span port with traffic that Security Onion will be monitoring. Use the configuration for the OPT4 interface.\nConfiguring Security Onion This will be the all-in-one IDS,Security Monitoring, and Log Management solution Download the Security Onion ISO file from here\nSelect Typical installation and click next.\nInstaller disc image file, SO ISO file path and Click Next.\nOn the next screen chose Linux, CentOS 7 64-Bit and click Next.\nName the VM l1-sec and click next.\nMinimum 200GB but if you can use 400GB\nThen click “Customize Hardware” and do the following\n~Change memory to 4-32GB\n~ Add two Network Adapters and assign them Vmnet4 \u0026 Vmnet5 respectively.\nPower on the virtual machine and click enter when prompted\nAfter the initial stages of loading, type “yes” when prompted\nSet a username \u0026 password\nAfter Security Onion reboots, we will finish up the install.\nEnter the Username \u0026 password.\nSelect “Yes”\nSelect the EVAL option\nType “AGREE”\nSelect “Standard” Set a homename\nClick the space bar to select ens33 as the management interface\nSet the addressing to DHCP.\nSelect “YES” at the next prompt\nSelect “OK” at the next prompt.\nSelect “Direct” for the next prompt.\nSelect “ens35” as the monitor Interface.\nSelect “Automatic” for the OS patch schedule.\nAccept the default home network IP.\nAccept all the defaults.\nEnter an email address and password for the admin account.\nSelect “IP”\nSelect “Yes” for the NTP server \u0026 accept the defaults\nTake note of your final settings before proceeding! If possible take a screenshot\nMost important detail is the IP address for web access\nSelect “YES”\nSecOnionMgmt/Analyst Machine After installing Security Onion, having access to the web interface will be done from an external Ubuntu Desktop simulating a SOC/Security Analyst accessing a SIEM or any other tool from their device.\nIn order to this, you’ll first have to configure an Ubuntu Desktop. This is a very easy process and I’ll not be covering it in this write-up but it is covered in the video. Be sure to use all the default settings for the Ubuntu Desktop configuration.\nDownload Ubuntu Desktop Install Ubuntu Desktop\nAfter this installation, run the ifconfig command on the Ubuntu Machine and take note of its IP Address.\nGo back to your SO instance and run the following command\nsudo so-allow Enter your password\nType a and wait for the process to complete\nType in the IP address of your Ubuntu desktop\nNavigate to the SO IP on your ubuntu desktop\nConfiguring Kali Linux Kali Linux will be used as a attcker machine\nDownload the Kali Linux ISO\nBefore power on on the VM, change the Network Adapter to Vmnet2 and set the memory to 4GB, then power it on\nGo throught the install\nPfsense interfaces and Rules We will use the Kali VM to setup Pfsense\nNavigate to the web browser and search for 192.168.1.1\nThe default credence are “admin” \u0026 “Pfsense”\nYou’ll be greeted with a “Wizard/Pfsense setup/” page.\nSet the DNS server as 8.8.8.8 and 4.4.4.4\nThen chose your timezone\nAt step 4 of 9, untick the last two options.\nat step 6 of 9, set a new admin password.\nSet up Interface Click on interface\nSelect LAN\nFor “Description”, Change LAN to KALI as this is the Kali Interface\nScroll all the way down and Click Save\nThen do this for the rest of the interfaces as show below\nFor OPT3 be sure to Enable interface.\nBack at Interfaces assignment select bridges\nClick add\nSelect VictimNetwork as the Member Interface\nThen select Display Advanced\nUnder Advanced Configuration for Span Port, select “SPANPORT”\nScroll all the way down and Click Save\nClick Firewall » Rules\nSelect the add button with arrow pointed downward\n~Under “edit firewall rule” for Protocol select ANY\n~ Scroll all the down and click save\nThis is most of what we need to do in Pfsense\nConfiging Windows server as a domain controller You can follow The Cyber Mentor guide to set up Active Directory and Windows 10 VM. We just need to set up the network stuff.\nThe Cyber Mentor’s youtube guide Navigate to Control Panel \u003e Network and Internet \u003e Network Connections\nWindows 10 host networking Naviage to Network Adapter settings\nRight-click on Ethernet0 and select properties\nSelect IPv4 and set the ip address 192.168.2.21, use 192.168.2.1 as the default gateway, and use 192.168.2.10 as the DNS server.\n",
  "wordCount" : "1071",
  "inLanguage": "en",
  "datePublished": "2022-10-07T14:21:08-05:00",
  "dateModified": "2022-10-07T14:21:08-05:00",
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "https://rebootcyber.xyz/posts/cybersecurity-homelab-for-dectection-and-monitoring/"
  },
  "publisher": {
    "@type": "Organization",
    "name": "Liam Blog",
    "logo": {
      "@type": "ImageObject",
      "url": "https://rebootcyber.xyz/favicon.ico"
    }
  }
}
</script>
</head>

<body class="" id="top">
<script>
    if (localStorage.getItem("pref-theme") === "dark") {
        document.body.classList.add('dark');
    } else if (localStorage.getItem("pref-theme") === "light") {
        document.body.classList.remove('dark')
    } else if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
        document.body.classList.add('dark');
    }

</script>

<header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="https://rebootcyber.xyz" accesskey="h" title="Liam Blog (Alt + H)">Liam Blog</a>
            <div class="logo-switches">
                <button id="theme-toggle" accesskey="t" title="(Alt + T)">
                    <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                    <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line>
                        <line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                    </svg>
                </button>
            </div>
        </div>
        <ul id="menu">
            <li>
                <a href="https://rebootcyber.xyz/about/" title="about">
                    <span>about</span>
                </a>
            </li>
            <li>
                <a href="https://rebootcyber.xyz/archive/" title="Archive">
                    <span>Archive</span>
                </a>
            </li>
            <li>
                <a href="https://rebootcyber.xyz/tags/" title="tags">
                    <span>tags</span>
                </a>
            </li>
            <li>
                <a href="https://rebootcyber.xyz" title="rebootcyber.xyz">
                    <span>rebootcyber.xyz</span>&nbsp;
                    <svg fill="none" shape-rendering="geometricPrecision" stroke="currentColor" stroke-linecap="round"
                        stroke-linejoin="round" stroke-width="2.5" viewBox="0 0 24 24" height="12" width="12">
                        <path d="M18 13v6a2 2 0 01-2 2H5a2 2 0 01-2-2V8a2 2 0 012-2h6"></path>
                        <path d="M15 3h6v6"></path>
                        <path d="M10 14L21 3"></path>
                    </svg>
                </a>
            </li>
        </ul>
    </nav>
</header>
<main class="main">

<article class="post-single">
  <header class="post-header">
    
    <h1 class="post-title">
      Cybersecurity Homelab for Dectection and Monitoring
    </h1>
    <div class="post-meta"><span title='2022-10-07 14:21:08 -0500 CDT'>October 7, 2022</span>

</div>
  </header> 
  <div class="post-content"><h1 id="cybersecurity-homelab-for-dectection--monitoring">Cybersecurity homelab for dectection &amp; monitoring<a hidden class="anchor" aria-hidden="true" href="#cybersecurity-homelab-for-dectection--monitoring">#</a></h1>
<h1 id="building-a-cybersecurity-homelab-for-detection--monitoring">Building a cybersecurity homelab for detection &amp; monitoring<a hidden class="anchor" aria-hidden="true" href="#building-a-cybersecurity-homelab-for-detection--monitoring">#</a></h1>
<p>This homelab will help you apply concepets used in real-world large-scale/enterprise infrastructe</p>
<h2 id="what-is-a-homelab">What is a homelab<a hidden class="anchor" aria-hidden="true" href="#what-is-a-homelab">#</a></h2>
<p>A homelab is a place where you can safely do experiments without messing anything up</p>
<h2 id="content">Content<a hidden class="anchor" aria-hidden="true" href="#content">#</a></h2>
<ul>
<li>installing VMware Workstation as hypervisor</li>
<li>Configuring Pfsense firewall for network segmentation &amp; security</li>
<li>Configuring Security Onion as an all-in-one IDS, Security, and Log Management solution</li>
<li>Configuring Kali Linux as an attack machine</li>
<li>Configuring Windows Server 2019 as a DC</li>
<li>Configuring Windows server</li>
<li>Configuring Splunk</li>
</ul>
<p><img loading="lazy" src="/topology.png" alt="network topology"  />
</p>
<h2 id="downloading--installing-vmware-workstation-pro">Downloading &amp; installing vmware workstation pro<a hidden class="anchor" aria-hidden="true" href="#downloading--installing-vmware-workstation-pro">#</a></h2>
<p><a href="https://www.vmware.com/products/workstation-player/workstation-player-evaluation.html">VMware workstation pro</a></p>
<h2 id="configuring-pfsense">Configuring Pfsense<a hidden class="anchor" aria-hidden="true" href="#configuring-pfsense">#</a></h2>
<p>Pfsense will be configured as a firewall to segment our private homelab network and will be only accessible from our Kali Linux VM</p>
<p>Click &ldquo;Create a new Virtual Machine&rdquo; on VMware Workstation homescreen</p>
<p>Make sure &ldquo;Typical (recommenced)&rdquo; is selected and click Next.</p>
<p><img loading="lazy" src="/start.png" alt="network topology"  />
</p>
<p>Click browser and navigate to the folder where your Pfsense file is located.</p>
<p>Click Next.</p>
<p><img loading="lazy" src="/os.png" alt="iso"  />
</p>
<p>Rename your Virtual Machine. Preferably &ldquo;pf-l1&rdquo;</p>
<p>Click next</p>
<p>20GB disk size is sufficient for this VM</p>
<p>Ensure that the &ldquo;Split virtual disk into multiple files&rdquo; option is selected</p>
<p>Click next.</p>
<p><img loading="lazy" src="/disk.png" alt="disk"  />
</p>
<p>Click &ldquo;Customize Hardware&rdquo;.</p>
<p>Increase the memory to 2GB</p>
<p>Add 5 network adapters and correspond them with VMnet interface as shown below. Then click finsh</p>
<p><img loading="lazy" src="/network.png" alt="network"  />
</p>
<p>The Pfsense machine will power on and start with this screen. Accept all the defaults.Pfsense will configure and reboot. <img loading="lazy" src="/Pfsense.png" alt="Pfsense"  />
</p>
<p>Ones you are in the home screen of Pfsense we will get start setting up network adapters.</p>
<p>Enter option 1</p>
<p>**Should VLANS be set up now [y:n]?:**n</p>
<p>Enter <strong>em0, em1, em2, em3, em4 &amp; em5</strong> respectively for each consecutive question</p>
<p>**Do you want to proceed [y:n]?:**y</p>
<p><img loading="lazy" src="/em.png" alt="em"  />
 <img loading="lazy" src="/em2.png" alt="em2"  />
</p>
<p>Enter option 2 We&rsquo;ll start with the LAN interface (2) The IP address <strong>192.168.1.1</strong> is going to be used to access the Pfsense WebGUI via the Kali Machine use the configuration below for the LAN interface.</p>
<p><img loading="lazy" src="/opt1.png" alt="opt1"  />
</p>
<p>Use the configuration below for the OPT1 interface.</p>
<p><img loading="lazy" src="/opt1-1.png" alt="opt1-1"  />
</p>
<p>Use the configuration below for the OPT2 interface</p>
<p><img loading="lazy" src="/opt2.png" alt="opt2"  />
</p>
<p>Leave the OPT3 interface without an IP as it is going to have the span port with traffic that Security Onion will be monitoring. Use the configuration for the OPT4 interface.</p>
<p><img loading="lazy" src="/opt4.png" alt="opt4"  />
</p>
<h2 id="configuring-security-onion">Configuring Security Onion<a hidden class="anchor" aria-hidden="true" href="#configuring-security-onion">#</a></h2>
<p>This will be the all-in-one IDS,Security Monitoring, and Log Management solution <a href="https://github.com/Security-Onion-Solutions/securityonion/blob/master/VERIFY_ISO.md">Download the Security Onion ISO file from here</a></p>
<p>Select Typical installation and click next.</p>
<p>Installer disc image file, SO ISO file path and Click Next.</p>
<p>On the next screen chose Linux, CentOS 7 64-Bit and click Next.</p>
<p>Name the VM l1-sec and click next.</p>
<p>Minimum 200GB but if you can use 400GB</p>
<p>Then click &ldquo;Customize Hardware&rdquo; and do the following</p>
<p>~Change memory to 4-32GB</p>
<p>~ Add two Network Adapters and assign them Vmnet4 &amp; Vmnet5 respectively.</p>
<p><img loading="lazy" src="/sec.png" alt="sec"  />
</p>
<p>Power on the virtual machine and click enter when prompted</p>
<p>After the initial stages of loading, type &ldquo;yes&rdquo; when prompted</p>
<p><img loading="lazy" src="/sec1.png" alt="sec1"  />
</p>
<p>Set a username &amp; password</p>
<p>After Security Onion reboots, we will finish up the install.</p>
<p>Enter the Username &amp; password.</p>
<p>Select &ldquo;Yes&rdquo;</p>
<p><img loading="lazy" src="/sec2.png" alt="sec2.png"  />
</p>
<p>Select the EVAL option</p>
<p><img loading="lazy" src="/sec3.png" alt="sec3.png"  />
</p>
<p>Type &ldquo;AGREE&rdquo;</p>
<p><img loading="lazy" src="/sec4.png" alt="sec4"  />
</p>
<p>Select &ldquo;Standard&rdquo; <img loading="lazy" src="/sec5.png" alt="sec5"  />
</p>
<p>Set a homename</p>
<p>Click the space bar to select ens33 as the management interface</p>
<p><img loading="lazy" src="/sec6.png" alt="sec6"  />
</p>
<p>Set the addressing to DHCP.</p>
<p><img loading="lazy" src="/sec7.png" alt="sec7"  />
</p>
<p>Select &ldquo;YES&rdquo; at the next prompt</p>
<p>Select &ldquo;OK&rdquo; at the next prompt.</p>
<p>Select &ldquo;Direct&rdquo; for the next prompt.</p>
<p>Select &ldquo;ens35&rdquo; as the monitor Interface.</p>
<p><img loading="lazy" src="/sec8.png" alt="sec8"  />
</p>
<p>Select &ldquo;Automatic&rdquo; for the OS patch schedule.</p>
<p>Accept the default home network IP.</p>
<p>Accept all the defaults.</p>
<p>Enter an email address and password for the admin account.</p>
<p>Select &ldquo;IP&rdquo;</p>
<p><img loading="lazy" src="/sec9.png" alt="sec9.png"  />
</p>
<p>Select &ldquo;Yes&rdquo; for the NTP server &amp; accept the defaults</p>
<p>Take note of your final settings before proceeding! If possible take a screenshot</p>
<p><strong>Most important detail is the IP address for web access</strong></p>
<p>Select &ldquo;YES&rdquo;</p>
<h3 id="seconionmgmtanalyst-machine">SecOnionMgmt/Analyst Machine<a hidden class="anchor" aria-hidden="true" href="#seconionmgmtanalyst-machine">#</a></h3>
<p>After installing Security Onion, having access to the web interface will be done from an external Ubuntu Desktop simulating a SOC/Security Analyst accessing a SIEM or any other tool from their device.</p>
<p>In order to this, you’ll first have to configure an Ubuntu Desktop. This is a very easy process and I’ll not be covering it in this write-up but it is covered in the video. Be sure to use all the default settings for the Ubuntu Desktop configuration.</p>
<p><a href="https://ubuntu.com/download/desktop">Download Ubuntu Desktop</a> <a href="https://getlabsdone.com/10-easy-steps-to-install-ubuntu-19-04-on-vmware-workstation-15/">Install Ubuntu Desktop</a></p>
<p>After this installation, run the ifconfig command on the Ubuntu Machine and take note of its IP Address.</p>
<p>Go back to your SO instance and run the following command</p>
<pre><code>	sudo so-allow
</code></pre>
<p>Enter your password</p>
<p>Type a and wait for the process to complete</p>
<p>Type in the IP address of your Ubuntu desktop</p>
<p>Navigate to the SO IP on your ubuntu desktop</p>
<h2 id="configuring-kali-linux">Configuring Kali Linux<a hidden class="anchor" aria-hidden="true" href="#configuring-kali-linux">#</a></h2>
<p>Kali Linux will be used as a attcker machine</p>
<p><a href="https://www.offensive-security.com/kali-linux-vm-vmware-virtualbox-image-download/">Download the Kali Linux ISO</a></p>
<p>Before power on on the VM, change the Network Adapter to Vmnet2 and set the memory to 4GB, then power it on</p>
<p>Go throught the install</p>
<h2 id="pfsense-interfaces-and-rules">Pfsense interfaces and Rules<a hidden class="anchor" aria-hidden="true" href="#pfsense-interfaces-and-rules">#</a></h2>
<p>We will use the Kali VM to setup Pfsense</p>
<p>Navigate to the web browser and search for 192.168.1.1</p>
<p>The default credence are &ldquo;admin&rdquo; &amp; &ldquo;Pfsense&rdquo;</p>
<p>You&rsquo;ll be greeted with a &ldquo;Wizard/Pfsense setup/&rdquo; page.</p>
<p>Set the DNS server as 8.8.8.8 and 4.4.4.4</p>
<p>Then chose your timezone</p>
<p>At step <strong>4 of 9</strong>, untick the last two options.</p>
<p>at step <strong>6 of 9</strong>, set a new admin password.</p>
<h3 id="set-up-interface">Set up Interface<a hidden class="anchor" aria-hidden="true" href="#set-up-interface">#</a></h3>
<p>Click on interface</p>
<p>Select LAN</p>
<p>For &ldquo;Description&rdquo;, Change LAN to KALI as this is the Kali Interface</p>
<p>Scroll all the way down and Click Save</p>
<p>Then do this for the rest of the interfaces as show below</p>
<p><img loading="lazy" src="/Pfsense.png" alt="Pfsense"  />
</p>
<p>For OPT3 be sure to Enable interface.</p>
<p>Back at Interfaces assignment select bridges</p>
<p>Click add</p>
<p><img loading="lazy" src="/Pfsense1.png" alt="Pfsense1"  />
</p>
<p>Select <strong>VictimNetwork</strong> as the Member Interface</p>
<p><img loading="lazy" src="/Pfsense2.png" alt="Pfsense3"  />
</p>
<p>Then select <strong>Display Advanced</strong></p>
<p>Under <strong>Advanced Configuration</strong> for <strong>Span Port</strong>, select <strong>&ldquo;SPANPORT&rdquo;</strong></p>
<p>Scroll all the way down and Click <strong>Save</strong></p>
<p><img loading="lazy" src="/Pfsense3.png" alt="Pfsense3"  />
</p>
<p>Click Firewall &raquo; Rules</p>
<p><img loading="lazy" src="/Pfsense4.png" alt="Pfsense4"  />
</p>
<p>Select the add button with arrow pointed downward</p>
<p>~Under &ldquo;edit firewall rule&rdquo; for Protocol select ANY</p>
<p>~ Scroll all the down and click save</p>
<p>This is most of what we need to do in Pfsense</p>
<h3 id="configing-windows-server-as-a-domain-controller">Configing Windows server as a domain controller<a hidden class="anchor" aria-hidden="true" href="#configing-windows-server-as-a-domain-controller">#</a></h3>
<p>You can follow The Cyber Mentor guide to set up Active Directory and Windows 10 VM. We just need to set up the network stuff.</p>
<p><a href="https://www.youtube.com/watch?v=xftEuVQ7kY0">The Cyber Mentor&rsquo;s youtube guide</a> <img loading="lazy" src="/server1.png" alt="server1"  />
</p>
<p>Navigate to <strong>Control Panel &gt; Network and Internet &gt; Network Connections</strong></p>
<p><img loading="lazy" src="/server19.png" alt="server19"  />
</p>
<h3 id="windows-10-host-networking">Windows 10 host networking<a hidden class="anchor" aria-hidden="true" href="#windows-10-host-networking">#</a></h3>
<p>Naviage to Network Adapter settings</p>
<p>Right-click on Ethernet0 and select properties</p>
<p>Select IPv4 and set the ip address 192.168.2.21, use 192.168.2.1 as the default gateway, and use 192.168.2.10 as the DNS server.</p>


  </div>

  <footer class="post-footer">
    <ul class="post-tags">
      <li><a href="https://rebootcyber.xyz/tags/self-hosted/">Self-Hosted</a></li>
      <li><a href="https://rebootcyber.xyz/tags/hardware/">hardware</a></li>
      <li><a href="https://rebootcyber.xyz/tags/tech/">tech</a></li>
      <li><a href="https://rebootcyber.xyz/tags/dns/">DNS</a></li>
      <li><a href="https://rebootcyber.xyz/tags/opendns/">opendns</a></li>
      <li><a href="https://rebootcyber.xyz/tags/pfsense/">Pfsense</a></li>
      <li><a href="https://rebootcyber.xyz/tags/hack/">HACK</a></li>
    </ul>
  </footer>
</article>
    </main>
    
<footer class="footer">
    <span>&copy; 2022 <a href="https://rebootcyber.xyz">Liam Blog</a></span>
    </footer>
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)" class="top-link" id="top-link" accesskey="g">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
        <path d="M12 6H0l6-6z" />
    </svg>
</a>

<script>
    let menu = document.getElementById('menu')
    if (menu) {
        menu.scrollLeft = localStorage.getItem("menu-scroll-position");
        menu.onscroll = function () {
            localStorage.setItem("menu-scroll-position", menu.scrollLeft);
        }
    }

    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function (e) {
            e.preventDefault();
            var id = this.getAttribute("href").substr(1);
            if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
                    behavior: "smooth"
                });
            } else {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();
            }
            if (id === "top") {
                history.replaceState(null, null, " ");
            } else {
                history.pushState(null, null, `#${id}`);
            }
        });
    });

</script>
<script>
    var mybutton = document.getElementById("top-link");
    window.onscroll = function () {
        if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
            mybutton.style.visibility = "visible";
            mybutton.style.opacity = "1";
        } else {
            mybutton.style.visibility = "hidden";
            mybutton.style.opacity = "0";
        }
    };

</script>
<script>
    document.getElementById("theme-toggle").addEventListener("click", () => {
        if (document.body.className.includes("dark")) {
            document.body.classList.remove('dark');
            localStorage.setItem("pref-theme", 'light');
        } else {
            document.body.classList.add('dark');
            localStorage.setItem("pref-theme", 'dark');
        }
    })

</script>
</body>

</html>
